# TCP可靠性Base



##  TCP协议的可靠性如何保证



- **分块传送**：数据被分割成**最合适的**数据块（UDP的数据报长度不变）

  发送大包、长文，总比发送一小块数据，失败概率大得多吧

- **等待确认**：通过定时器等待接收端发送确认请求，收不到确认则重发

  根据墨菲定律，总会失败的，总会丢失的； 怎么办呢？重发呗

- **确认回复**：收到确认后发送确认回复(不是立即发送，通常推迟几分之一秒)

  不确认你咋知道要不要重发，重发几次

- **数据校验**：保持首部和数据的校验和，检测数据传输过程有无变化

- **乱序排序**：接收端能重排序数据，以正确的顺序交给应用端

  应对复杂的网络排队情况

- **重复丢弃**：接收端能丢弃重复的数据包

  重试、重发情况下可能出现，也许对方只是收到数据慢了，而不是丢失了

- **流量缓冲**：两端有固定大小的缓冲区（滑动窗口），防止速度不匹配丢数据