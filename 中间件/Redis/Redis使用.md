# Redis使用

[toc]

| 序号 | 问题                | 一句话总结                                               | 参考文档 |
| ---- | ------------------- | -------------------------------------------------------- | -------- |
| 0    | redis的安装         | https://blog.csdn.net/hrlee520/article/details/103665450 |          |
| 1    | redis可以用来干什么 |                                                          |          |
| 2    | 网页版redis试用     | https://try.redis.io/                                    |          |
| 4    | redis内存预估       | http://www.redis.cn/redis_memory/                        |          |
| 5    | redis实现分布式锁   |                                                          |          |



## 1.redis可以用来干什么

1. 记录帖子的点赞数、评论数和点击数 (hash)
2. 记录用户的帖子 ID 列表 (排序)，便于快速显示用户的帖子列表 (zset)。 
3. 记录帖子的标题、摘要、作者和封面信息，用于列表页展示 (hash)。 
4. 记录帖子的点赞用户 ID 列表，评论 ID 列表，用于显示和去重计数 (zset)。 
5. 缓存近期热帖内容 (帖子内容空间占用比较大)，减少数据库压力 (hash)。 
6. 记录帖子的相关文章 ID，根据内容推荐相关帖子 (list)。 
7. 如果帖子 ID 是整数自增的，可以使用 Redis 来分配帖子 ID(计数器)。 
8. 收藏集和帖子之间的关系 (zset)。 
9. 记录热榜帖子 ID 列表，总热榜和分类热榜 (zset)。 
10. 缓存用户行为历史，进行恶意行为过滤 (zset,hash)。

> 当然，实际情况下需求可能也没这么多，因为在请求压力不大的情况下，很多数据都是可以直接从数据库中查询的。
>
> 但请求压力一大，以前通过数据库直接存取的数据则必须要挪到缓存里来



## 5.redis实现分布式锁

参考文章  [Redlock安全吗？](http://antirez.com/news/101)

分布式锁的要求 : 互斥性、安全性、避免死锁、高可用。

基于`redis`(要通过Lua脚本，因为setnx命令不能原子地设置过期时间。

又因为redis集器要考虑更复的场景，所以Redis作者antirez给出了RedLock算法解决,但本质上也不能完全可信)



